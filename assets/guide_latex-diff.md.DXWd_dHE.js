import{_ as i}from"./chunks/latexdff-v1.Cnrau3LD.js";import{_ as t}from"./chunks/vscode-compare.Dz7KZRXi.js";import{_ as o,c as a,o as n,a2 as l}from"./chunks/framework.D30IVGRC.js";const b=JSON.parse('{"title":"LaTeX Diff","description":"","frontmatter":{},"headers":[],"relativePath":"guide/latex-diff.md","filePath":"guide/latex-diff.md"}'),s={name:"guide/latex-diff.md"};function r(d,e,c,f,h,u){return n(),a("div",null,e[0]||(e[0]=[l('<h1 id="latex-diff" tabindex="-1">LaTeX Diff <a class="header-anchor" href="#latex-diff" aria-label="Permalink to &quot;LaTeX Diff&quot;">​</a></h1><p>A core design philosophy of TeXRA is to provide transparency and control over the AI&#39;s modifications. The integrated LaTeX diff functionality is central to this, allowing you to precisely see and evaluate the changes suggested by AI agents before deciding how to incorporate them.</p><p>TeXRA automatically generates diff files after agent runs that modify <code>.tex</code> files (like <code>correct</code> or <code>polish</code>), comparing the agent&#39;s output (<code>*_r0_*.tex</code> or <code>*_r1_*.tex</code>) against the original input or the previous round&#39;s output. This provides immediate observability into the agent&#39;s actions.</p><p>This guide explains how to use TeXRA&#39;s dedicated LaTeXdiff features for comparing arbitrary file versions and understanding the results.</p><h2 id="understanding-latex-diff" tabindex="-1">Understanding LaTeX Diff <a class="header-anchor" href="#understanding-latex-diff" aria-label="Permalink to &quot;Understanding LaTeX Diff&quot;">​</a></h2><p>Unlike standard text diff tools (which can look like hieroglyphics when comparing LaTeX source), LaTeX diff understands LaTeX syntax and produces readable, compilable LaTeX documents with changes highlighted. This approach offers several advantages:</p><ol><li><strong>Structural Awareness</strong>: Understands LaTeX environments and commands</li><li><strong>Visual Clarity</strong>: Shows changes within the typeset document</li><li><strong>Compilable Output</strong>: Produces valid LaTeX documents that can be compiled</li><li><strong>Academic Focus</strong>: Optimized for scholarly documents with equations, figures, and citations</li></ol><h2 id="the-latexdiffs-section" tabindex="-1">The LaTeXdiffs Section <a class="header-anchor" href="#the-latexdiffs-section" aria-label="Permalink to &quot;The LaTeXdiffs Section&quot;">​</a></h2><p>The LaTeX diff functionality is accessible through the &quot;LaTeXdiffs&quot; section (<i class="codicon codicon-chevron-down"></i> LaTeXDiffs) in the TeXRA interface:</p><p>This section provides several key features:</p><ol><li><strong>Base File Selection</strong>: Choose an original/base document</li><li><strong>Edited File Selection</strong>: Select a modified version</li><li><strong>latexdiff Button</strong>: Generate a diff between two files</li><li><strong>Git Integration</strong>: Compare with previous versions using Git history</li><li><strong>Merge Button</strong>: Intelligently merge changes from edited file to base file. See the <a href="./intelligent-merge.html">Intelligent Merge Workflow</a> guide for details.</li></ol><h2 id="basic-file-comparison" tabindex="-1">Basic File Comparison <a class="header-anchor" href="#basic-file-comparison" aria-label="Permalink to &quot;Basic File Comparison&quot;">​</a></h2><p>To compare two LaTeX files:</p><h3 id="step-1-select-files" tabindex="-1">Step 1: Select Files <a class="header-anchor" href="#step-1-select-files" aria-label="Permalink to &quot;Step 1: Select Files&quot;">​</a></h3><ol><li>In the &quot;Base File&quot; dropdown (<i class="codicon codicon-file"></i> Base), select the original version</li><li>In the &quot;Edited File&quot; dropdown (<i class="codicon codicon-edit"></i> Edited), select the modified version</li></ol><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>The &quot;Current&quot; button (<i class="codicon codicon-file-code"></i>) allows you to quickly select the currently open file for either role. The &quot;Empty&quot; button (<i class="codicon codicon-close"></i>) clears the selection for that role.</p></div><h3 id="step-2-generate-the-diff" tabindex="-1">Step 2: Generate the Diff <a class="header-anchor" href="#step-2-generate-the-diff" aria-label="Permalink to &quot;Step 2: Generate the Diff&quot;">​</a></h3><p>Click the &quot;latexdiff&quot; button with the <i class="codicon codicon-diff-single"></i> icon.</p><p>TeXRA will:</p><ol><li>Run the <code>latexdiff</code> tool on your selected files.</li><li>Generate a new LaTeX document (e.g., <code>original_diff.tex</code>) with highlighted changes.</li><li><strong>Automatically open</strong> this generated <code>.tex</code> diff file in your editor.</li><li>If the <a href="https://marketplace.visualstudio.com/items?itemName=James-Yu.latex-workshop" target="_blank" rel="noreferrer">LaTeX Workshop</a> extension is installed, TeXRA will then automatically trigger its <strong>build</strong> command for the diff file.</li><li>After a short delay (to allow compilation), it will trigger LaTeX Workshop&#39;s <strong>view</strong> command to show the compiled PDF diff.</li></ol><h3 id="step-3-review-changes" tabindex="-1">Step 3: Review Changes <a class="header-anchor" href="#step-3-review-changes" aria-label="Permalink to &quot;Step 3: Review Changes&quot;">​</a></h3><p>The generated diff document will highlight:</p><ul><li><strong>Additions</strong>: Usually in blue or underlined</li><li><strong>Deletions</strong>: Usually in red or struck through</li><li><strong>Changes</strong>: Shown as deletions followed by additions</li></ul><h2 id="git-based-version-comparison" tabindex="-1">Git-Based Version Comparison <a class="header-anchor" href="#git-based-version-comparison" aria-label="Permalink to &quot;Git-Based Version Comparison&quot;">​</a></h2><p>TeXRA also allows you to compare documents with previous Git versions:</p><h3 id="step-1-select-base-file-and-commit" tabindex="-1">Step 1: Select Base File and Commit <a class="header-anchor" href="#step-1-select-base-file-and-commit" aria-label="Permalink to &quot;Step 1: Select Base File and Commit&quot;">​</a></h3><ol><li>Select a base file (typically your current working file) using the &quot;Base File&quot; dropdown (<i class="codicon codicon-file"></i> Base).</li><li>Choose a Git commit from the &quot;Commit&quot; dropdown (<i class="codicon codicon-git-commit"></i> Commit).</li></ol><div class="info custom-block"><p class="custom-block-title">INFO</p><p>The commit dropdown shows recent commits. Click the refresh icon (<i class="codicon codicon-refresh"></i>) next to the label to update the list.</p></div><h3 id="step-2-generate-the-diff-1" tabindex="-1">Step 2: Generate the Diff <a class="header-anchor" href="#step-2-generate-the-diff-1" aria-label="Permalink to &quot;Step 2: Generate the Diff&quot;">​</a></h3><p>Click the &quot;latexdiff-vc&quot; button (<i class="codicon codicon-diff-single"></i> icon) to compare your file with its version at the selected commit.</p><p>TeXRA will:</p><ol><li>Run the <code>latexdiff-vc</code> tool using the selected file and commit.</li><li>Generate a new LaTeX document (e.g., <code>original_diff_rev[commit_hash].tex</code>) with highlighted changes.</li><li><strong>Automatically open</strong> this generated <code>.tex</code> diff file in your editor.</li><li>If the <a href="https://marketplace.visualstudio.com/items?itemName=James-Yu.latex-workshop" target="_blank" rel="noreferrer">LaTeX Workshop</a> extension is installed, TeXRA will then automatically trigger its <strong>build</strong> command for the diff file.</li><li>After a short delay (to allow compilation), it will trigger LaTeX Workshop&#39;s <strong>view</strong> command to show the compiled PDF diff.</li></ol><h3 id="step-3-manage-diff-outputs" tabindex="-1">Step 3: Manage Diff Outputs <a class="header-anchor" href="#step-3-manage-diff-outputs" aria-label="Permalink to &quot;Step 3: Manage Diff Outputs&quot;">​</a></h3><p>After generating a Git-based diff using the &quot;latexdiff-vc&quot; button, you can:</p><ul><li><strong>Pack</strong> (<i class="codicon codicon-archive"></i>): Archive the diff files using the &quot;Pack&quot; button in the Commit section.</li><li><strong>Clean</strong> (<i class="codicon codicon-trash"></i>): Remove the diff files using the &quot;Clean&quot; button in the Commit section.</li></ul><h2 id="understanding-diff-output" tabindex="-1">Understanding Diff Output <a class="header-anchor" href="#understanding-diff-output" aria-label="Permalink to &quot;Understanding Diff Output&quot;">​</a></h2><p>The diff document uses a specialized markup to highlight changes:</p><h3 id="default-markup" tabindex="-1">Default Markup <a class="header-anchor" href="#default-markup" aria-label="Permalink to &quot;Default Markup&quot;">​</a></h3><p>By default, latexdiff uses the following markup:</p><ul><li><strong>Additions</strong>: <code>\\DIFadd{Added text}</code></li><li><strong>Deletions</strong>: <code>\\DIFdel{Deleted text}</code></li></ul><p>These commands are defined in the preamble of the generated document and typically render as:</p><ul><li>Additions: <span style="color:blue;text-decoration:underline;">Blue underlined text</span></li><li>Deletions: <span style="color:red;text-decoration:line-through;">Red struck-through text</span></li></ul><h3 id="interpreting-complex-changes" tabindex="-1">Interpreting Complex Changes <a class="header-anchor" href="#interpreting-complex-changes" aria-label="Permalink to &quot;Interpreting Complex Changes&quot;">​</a></h3><p>For complex LaTeX structures, understanding the diff may require attention to:</p><ol><li><strong>Math Environments</strong>: Changes in equations may be marked differently</li><li><strong>Nested Environments</strong>: Changes within nested environments can be complex</li><li><strong>Command Arguments</strong>: Changes to command arguments are marked specially</li><li><strong>Whitespace Changes</strong>: May or may not be highlighted depending on settings</li></ol><h2 id="advanced-diff-usage" tabindex="-1">Advanced Diff Usage <a class="header-anchor" href="#advanced-diff-usage" aria-label="Permalink to &quot;Advanced Diff Usage&quot;">​</a></h2><h3 id="comparing-multiple-files" tabindex="-1">Comparing Multiple Files <a class="header-anchor" href="#comparing-multiple-files" aria-label="Permalink to &quot;Comparing Multiple Files&quot;">​</a></h3><p>For documents split across multiple files:</p><ol><li>Use the <code>merge</code> agent instead of the basic diff functionality</li><li>Select the base directory containing all files</li><li>Provide specific instructions for handling multiple files</li></ol><h2 id="integration-with-workflow" tabindex="-1">Integration with Workflow <a class="header-anchor" href="#integration-with-workflow" aria-label="Permalink to &quot;Integration with Workflow&quot;">​</a></h2><p>LaTeX diff integrates with several TeXRA workflows:</p><h3 id="document-review-workflow" tabindex="-1">Document Review Workflow <a class="header-anchor" href="#document-review-workflow" aria-label="Permalink to &quot;Document Review Workflow&quot;">​</a></h3><ol><li>Generate initial document using appropriate agent</li><li>Make manual edits or use another agent for revision</li><li>Use latexdiff to compare original and revised versions</li><li>Review and accept/reject changes</li><li>Use merge functionality to create final version</li></ol><h3 id="collaborative-editing-workflow" tabindex="-1">Collaborative Editing Workflow <a class="header-anchor" href="#collaborative-editing-workflow" aria-label="Permalink to &quot;Collaborative Editing Workflow&quot;">​</a></h3><ol><li>Share base document with collaborators</li><li>Receive edited versions back</li><li>Use latexdiff to visualize each contributor&#39;s changes</li><li>Use merge to selectively incorporate changes</li><li>Generate diffs of the merged document for confirmation</li></ol><h3 id="version-control-workflow" tabindex="-1">Version Control Workflow <a class="header-anchor" href="#version-control-workflow" aria-label="Permalink to &quot;Version Control Workflow&quot;">​</a></h3><ol><li>Commit document versions regularly to Git</li><li>Use latexdiff-vc to compare with previous versions</li><li>Track evolution of document over time</li><li>Identify when specific changes were made</li><li>Recover and merge content from previous versions as needed</li></ol><h2 id="under-the-hood" tabindex="-1">Under the Hood <a class="header-anchor" href="#under-the-hood" aria-label="Permalink to &quot;Under the Hood&quot;">​</a></h2><p>TeXRA&#39;s LaTeX diff functionality builds on several key technologies:</p><h3 id="latexdiff-tool" tabindex="-1">latexdiff Tool <a class="header-anchor" href="#latexdiff-tool" aria-label="Permalink to &quot;latexdiff Tool&quot;">​</a></h3><p><a href="https://ctan.org/pkg/latexdiff" target="_blank" rel="noreferrer">latexdiff</a> is a Perl script that compares LaTeX files and generates a marked-up LaTeX document highlighting differences.</p><p>TeXRA:</p><ol><li>Calls latexdiff with appropriate options</li><li>Processes the output for consistency</li><li>Applies additional formatting as needed</li></ol><h3 id="latexdiff-vc" tabindex="-1">latexdiff-vc <a class="header-anchor" href="#latexdiff-vc" aria-label="Permalink to &quot;latexdiff-vc&quot;">​</a></h3><p><a href="https://ctan.org/pkg/latexdiff" target="_blank" rel="noreferrer">latexdiff-vc</a> (version control) extends latexdiff to work with version control systems like Git.</p><p>TeXRA:</p><ol><li>Retrieves file versions from Git history</li><li>Passes them to latexdiff</li><li>Manages the output files</li></ol><h3 id="merge-process" tabindex="-1">Merge Process <a class="header-anchor" href="#merge-process" aria-label="Permalink to &quot;Merge Process&quot;">​</a></h3><p>The intelligent merge process:</p><ol><li>Analyzes both documents semantically</li><li>Identifies substantive changes</li><li>Creates a new document combining the best elements</li><li>Optionally generates a diff showing applied changes</li></ol><h2 id="troubleshooting" tabindex="-1">Troubleshooting <a class="header-anchor" href="#troubleshooting" aria-label="Permalink to &quot;Troubleshooting&quot;">​</a></h2><h3 id="common-diff-issues" tabindex="-1">Common Diff Issues <a class="header-anchor" href="#common-diff-issues" aria-label="Permalink to &quot;Common Diff Issues&quot;">​</a></h3><p><strong>Problem</strong>: Missing or incomplete highlights</p><p><strong>Solutions</strong>:</p><ul><li>Ensure both documents are valid LaTeX</li><li>Check for complex structures that might confuse latexdiff</li><li>Try comparing smaller sections of the document</li></ul><p><strong>Problem</strong>: Diff document doesn&#39;t compile</p><p><strong>Solutions</strong>:</p><ul><li>Look for conflicting markup in preamble</li><li>Check for unclosed environments or commands</li><li>Remove complex custom commands that might interfere with diff markup</li></ul><p><strong>Problem</strong>: Changes not properly aligned</p><p><strong>Solutions</strong>:</p><ul><li>Ensure similar document structure between versions</li><li>Try different latexdiff algorithms (implemented via the merge agent)</li><li>Break down large changes into smaller, more manageable edits</li></ul><h3 id="git-integration-issues" tabindex="-1">Git Integration Issues <a class="header-anchor" href="#git-integration-issues" aria-label="Permalink to &quot;Git Integration Issues&quot;">​</a></h3><p><strong>Problem</strong>: No commits shown in dropdown</p><p><strong>Solutions</strong>:</p><ul><li>Verify the document is in a Git repository</li><li>Refresh the commit list using the refresh icon (<i class="codicon codicon-refresh"></i>)</li><li>Check Git installation and configuration</li></ul><p><strong>Problem</strong>: Error when comparing with commit</p><p><strong>Solutions</strong>:</p><ul><li>Ensure the file existed in the selected commit</li><li>Check for file path changes or renames</li><li>Verify Git access permissions</li></ul><h2 id="best-practices" tabindex="-1">Best Practices <a class="header-anchor" href="#best-practices" aria-label="Permalink to &quot;Best Practices&quot;">​</a></h2><h3 id="preparing-documents-for-diff" tabindex="-1">Preparing Documents for Diff <a class="header-anchor" href="#preparing-documents-for-diff" aria-label="Permalink to &quot;Preparing Documents for Diff&quot;">​</a></h3><p>For best results with LaTeX diff:</p><ol><li><strong>Consistent Formatting</strong>: Use consistent indentation and line breaks</li><li><strong>Run a formatter</strong>: Use <code>latexindent</code> or <code>tex-fmt</code> on both documents before comparing</li><li><strong>Sensible Line Breaks</strong>: Break lines at logical points like sentences</li><li><strong>Clean Documents</strong>: Remove comments and unnecessary code</li></ol><h3 id="reviewing-diff-documents" tabindex="-1">Reviewing Diff Documents <a class="header-anchor" href="#reviewing-diff-documents" aria-label="Permalink to &quot;Reviewing Diff Documents&quot;">​</a></h3><p>When reviewing diff documents generated by TeXRA (e.g., from the example file <code>/examples/draft.tex</code>):</p><ol><li><p><strong>Compile First</strong>: Always compile the generated <code>_diff.tex</code> document to see the rendered changes visually. TeXRA attempts to do this automatically using LaTeX Workshop if installed.</p><p><em>Example Rendered Diff (Original vs. Round 1):</em><img src="'+i+'" alt="Visual Diff Output"></p></li><li><p><strong>VS Code Diff View</strong>: For a quick source-level comparison, open both the original (<code>draft.tex</code>) and the generated diff source (<code>draft_polish_r1_gemini25p_diff.tex</code> or similar) in VS Code. Select both files in the Explorer, right-click, and choose &quot;Compare Selected&quot;. This highlights source code changes side-by-side.</p><p><em>Example VS Code Side-by-Side Diff:</em><img src="'+t+'" alt="VS Code Side-by-Side Diff"></p></li><li><p><strong>Systematic Review</strong>: Go through changes methodically, section by section, in either the compiled PDF or the source diff.</p></li><li><p><strong>Check Context</strong>: Look at the context around each change.</p></li><li><p><strong>Verify Math</strong>: Pay special attention to changes in mathematical expressions.</p></li><li><p><strong>Check References</strong>: Verify cross-references and citations remain intact.</p></li></ol><h4 id="embedded-pdf-examples" tabindex="-1">Embedded PDF Examples <a class="header-anchor" href="#embedded-pdf-examples" aria-label="Permalink to &quot;Embedded PDF Examples&quot;">​</a></h4><div class="pdf-examples"><div class="pdf-tabs"><button type="button" class="pdf-tab active" data-pdf="/examples/draft_polish_r0_gemini25p_diff.pdf">Round 0: Initial AI Edit</button><button type="button" class="pdf-tab" data-pdf="/examples/draft_polish_r1_gemini25p_diff.pdf">Round 1: After Reflection</button><button type="button" class="pdf-tab" data-pdf="/examples/draft_polish_r1_gemini25p_diffr1r0.pdf">Reflection Changes</button></div><div class="pdf-viewer"><iframe src="/examples/draft_polish_r0_gemini25p_diff.pdf" id="pdf-frame" class="pdf-frame"></iframe><a href="/examples/draft_polish_r0_gemini25p_diff.pdf" target="_blank" id="pdf-link" class="pdf-link">Open in new tab</a></div></div><details class="details custom-block"><summary>Individual PDF Examples</summary><ul><li><a href="/examples/draft_polish_r0_gemini25p_diff.pdf">Original vs. Round 0 (Initial AI Output)</a></li><li><a href="/examples/draft_polish_r1_gemini25p_diff.pdf">Original vs. Round 1 (After Reflection)</a></li><li><a href="/examples/draft_polish_r1_gemini25p_diffr1r0.pdf">Round 0 vs. Round 1 (Reflection Changes)</a></li><li><a href="/examples/draft.pdf">Original Document</a></li></ul></details><h3 id="version-management" tabindex="-1">Version Management <a class="header-anchor" href="#version-management" aria-label="Permalink to &quot;Version Management&quot;">​</a></h3><p>Maintain a clear version strategy:</p><ol><li><strong>Regular Commits</strong>: Commit document versions at meaningful milestones</li><li><strong>Descriptive Messages</strong>: Use clear commit messages describing changes</li><li><strong>Pack Old Diffs</strong>: Use the &quot;Pack&quot; button to archive diff files</li><li><strong>Clean Unnecessary Files</strong>: Remove temporary diff files when no longer needed</li></ol><h2 id="next-steps" tabindex="-1">Next Steps <a class="header-anchor" href="#next-steps" aria-label="Permalink to &quot;Next Steps&quot;">​</a></h2><p>Now that you understand TeXRA&#39;s LaTeX diff functionality, you may be interested in:</p><ul><li><a href="/guide/intelligent-merge.html">Intelligent Merge</a> - Learn how to combine changes intelligently</li><li><a href="/guide/file-management.html">File Management</a> - Understand how to organize your files effectively</li><li><a href="/reference/best-practices.html">Best Practices</a> - Discover recommended workflows using diff features</li></ul>',104)]))}const x=o(s,[["render",r]]);export{b as __pageData,x as default};
